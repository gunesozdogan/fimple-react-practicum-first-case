(()=>{"use strict";const t={playerIcons:["X","O"],switchIcons:function(){this.playerIcons="X"===this.playerIcons[0]?["O","X"]:["X","O"]},addMark:function(t,e,r){this.board[t][e]=r},board:[["","",""],["","",""],["","",""]],checkWinner:function(){let t;for(let e=0;e<3;e++)if(this.board[e][0]===this.board[e][1]&&this.board[e][0]===this.board[e][2]&&""!==this.board[e][0])return t=this.board[e][0],t;for(let e=0;e<3;e++)if(this.board[0][e]===this.board[1][e]&&this.board[0][e]===this.board[2][e]&&""!==this.board[0][e])return t=this.board[0][e],t;if(this.board[0][0]===this.board[1][1]&&this.board[0][0]===this.board[2][2]){if(""!==this.board[0][0])return t=this.board[0][0],t}else if(this.board[2][0]===this.board[1][1]&&this.board[2][0]===this.board[0][2]&&""!==this.board[2][0])return t=this.board[2][0],t},checkDraw:function(){for(let t=0;t<3;t++)for(let e=0;e<3;e++)if(""===this.board[t][e])return!1;return!0},restartBoard:function(){for(let t=0;t<3;t++)for(let e=0;e<3;e++)this.board[t][e]=""}};!function(){const e=t,r=[...document.querySelectorAll(".icon-text")],o=[...document.querySelectorAll(".icon")],n=document.querySelector(".game-type"),c=[...document.querySelectorAll(".player")],i=document.querySelector(".overlay");let s=!1;function a(){if(s)return;s=!0;const t=document.querySelector(".active"),r=t.querySelector("button").textContent,o=t.querySelector("span").textContent,n=Number(this.className.split(" ")[0].split("-")[1]),c=Number(this.className.split(" ")[0].split("-")[2]),a=document.querySelector(".game-type").textContent,h=document.querySelector(".winner-text");if(""===this.textContent){if(l(this,r),e.addMark(n,c,r),e.checkWinner())u(o);else if(e.checkDraw())i.classList.remove("hidden"),h.textContent="The game is tie!";else if(a.includes("AI"))return d(),setTimeout((()=>{!function(){const t=document.querySelector(".active").querySelector("button").textContent;let r,o,n;do{o=Math.floor(3*Math.random()),n=Math.floor(3*Math.random()),r=document.querySelector(`.span-${o}-${n}`)}while(""!==r.textContent);l(r,t),e.addMark(o,n,t),e.checkWinner()?u("AI"):d()}(),s=!1}),1e3);d(),s=!1}}function l(t,e){t.textContent=e,t.style.color="X"===e?"#FFF":"#C3073F",t.style.transform="scale(1.4)",setTimeout((()=>{t.style.transform="scale(1)"}),500)}function d(){c.forEach((t=>t.classList.toggle("active")))}function u(t){const r=document.querySelector(".winner-text"),o=e.checkWinner();i.classList.remove("hidden"),r.textContent=`The winner is ${t} (${o})`}function h(){r.forEach((t=>t.textContent=""));const t=document.querySelector(".player-1"),o=document.querySelector(".player-2");t.classList.add("active"),o.classList.remove("active"),e.restartBoard()}function y(){e.switchIcons();const t=document.querySelector(".player-1-icon"),r=document.querySelector(".player-2-icon");t.textContent=e.playerIcons[0],r.textContent=e.playerIcons[1],h()}i.addEventListener("click",(function(){i.classList.add("hidden"),h()})),o.forEach((t=>t.addEventListener("click",y))),n.addEventListener("click",(function(){const t=document.querySelector(".player-2-name");"Player vs Player"===n.textContent?(n.textContent="Player vs AI",t.textContent="AI"):(n.textContent="Player vs Player",t.textContent="Player 2"),h()})),r.forEach((t=>t.addEventListener("click",a)))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU10QixFQUFhbkIsU0FBU0ksY0FBYyxnQkFDcENzQyxFQUFhN0MsRUFBWUwsY0FFL0JjLEVBQVFnQixVQUFVQyxPQUFPLFVBQ3pCSixFQUFXUixZQUFjLGlCQUFpQjhCLE1BQVNDLElBQ3ZELENBT0EsU0FBU0MsSUFDTDVDLEVBQVF1QyxTQUFTVixHQUFZQSxFQUFPakIsWUFBYyxLQUNsRCxNQUFNaUMsRUFBVTVDLFNBQVNJLGNBQWMsYUFDakN5QyxFQUFVN0MsU0FBU0ksY0FBYyxhQUN2Q3dDLEVBQVF0QixVQUFVd0IsSUFBSSxVQUN0QkQsRUFBUXZCLFVBQVVDLE9BQU8sVUFDekIxQixFQUFZRCxjQUNoQixDQWVBLFNBQVNtRCxJQUNMbEQsRUFBWVosY0FDWixNQUFNK0QsRUFBY2hELFNBQVNJLGNBQWMsa0JBQ3JDNkMsRUFBY2pELFNBQVNJLGNBQWMsa0JBRTNDNEMsRUFBWXJDLFlBQWNkLEVBQVliLFlBQVksR0FDbERpRSxFQUFZdEMsWUFBY2QsRUFBWWIsWUFBWSxHQUVsRDJELEdBQ0osQ0FHQXJDLEVBQVE0QyxpQkFBaUIsU0F2Q3pCLFdBQ0k1QyxFQUFRZ0IsVUFBVXdCLElBQUksVUFDdEJILEdBQ0osSUFxQ0F6QyxFQUFjb0MsU0FBU0osR0FBU0EsRUFBS2dCLGlCQUFpQixRQUFTSCxLQUMvRDVDLEVBQVkrQyxpQkFBaUIsU0ExQjdCLFdBQ0ksTUFBTUMsRUFBY25ELFNBQVNJLGNBQWMsa0JBQ1gscUJBQTVCRCxFQUFZUSxhQUNaUixFQUFZUSxZQUFjLGVBQzFCd0MsRUFBWXhDLFlBQWMsT0FFMUJSLEVBQVlRLFlBQWMsbUJBQzFCd0MsRUFBWXhDLFlBQWMsWUFHOUJnQyxHQUNKLElBZ0JBNUMsRUFBUXVDLFNBQVNWLEdBQVdBLEVBQU9zQixpQkFBaUIsUUFBUzFDLElBQ2hFLENBM0lVLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maW1wbGUtcmVhY3QtcHJhY3RpY3VtLWZpcnN0LWNhc2UvLi9zcmMvbW9kdWxlcy9nYW1lLmpzIiwid2VicGFjazovL2ZpbXBsZS1yZWFjdC1wcmFjdGljdW0tZmlyc3QtY2FzZS8uL3NyYy9tb2R1bGVzL1VJLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdhbWVCb2FyZCA9IChmdW5jdGlvbiAoKSB7XG4gICAgbGV0IHBsYXllckljb25zID0gWydYJywgJ08nXTtcbiAgICBjb25zdCBib2FyZCA9IFtcbiAgICAgICAgWycnLCAnJywgJyddLFxuICAgICAgICBbJycsICcnLCAnJ10sXG4gICAgICAgIFsnJywgJycsICcnXSxcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gc3dpdGNoSWNvbnMoKSB7XG4gICAgICAgIHRoaXMucGxheWVySWNvbnMgPVxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJJY29uc1swXSA9PT0gJ1gnID8gWydPJywgJ1gnXSA6IFsnWCcsICdPJ107XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkTWFyayhyb3csIGNvbHVtbiwgbWFyaykge1xuICAgICAgICB0aGlzLmJvYXJkW3Jvd11bY29sdW1uXSA9IG1hcms7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2hlY2tXaW5uZXIoKSB7XG4gICAgICAgIGxldCB3aW5uZXI7XG4gICAgICAgIC8vIENIRUNLUyBFQUNIIFJPV1xuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCAzOyByb3crKykge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbcm93XVswXSA9PT0gdGhpcy5ib2FyZFtyb3ddWzFdICYmXG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZFtyb3ddWzBdID09PSB0aGlzLmJvYXJkW3Jvd11bMl1cbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvYXJkW3Jvd11bMF0gIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbm5lciA9IHRoaXMuYm9hcmRbcm93XVswXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbm5lcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ0hFQ0tTIEVBQ0ggQ09MVU1OXG4gICAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IDM7IGNvbCsrKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZFswXVtjb2xdID09PSB0aGlzLmJvYXJkWzFdW2NvbF0gJiZcbiAgICAgICAgICAgICAgICB0aGlzLmJvYXJkWzBdW2NvbF0gPT09IHRoaXMuYm9hcmRbMl1bY29sXVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYm9hcmRbMF1bY29sXSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgd2lubmVyID0gdGhpcy5ib2FyZFswXVtjb2xdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2lubmVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBDSEVDS1MgRElBR09OQUxcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5ib2FyZFswXVswXSA9PT0gdGhpcy5ib2FyZFsxXVsxXSAmJlxuICAgICAgICAgICAgdGhpcy5ib2FyZFswXVswXSA9PT0gdGhpcy5ib2FyZFsyXVsyXVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmJvYXJkWzBdWzBdICE9PSAnJykge1xuICAgICAgICAgICAgICAgIHdpbm5lciA9IHRoaXMuYm9hcmRbMF1bMF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpbm5lcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuYm9hcmRbMl1bMF0gPT09IHRoaXMuYm9hcmRbMV1bMV0gJiZcbiAgICAgICAgICAgIHRoaXMuYm9hcmRbMl1bMF0gPT09IHRoaXMuYm9hcmRbMF1bMl1cbiAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ib2FyZFsyXVswXSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICB3aW5uZXIgPSB0aGlzLmJvYXJkWzJdWzBdO1xuICAgICAgICAgICAgICAgIHJldHVybiB3aW5uZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjaGVja0RyYXcoKSB7XG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDM7IHJvdysrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCAzOyBjb2wrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvYXJkW3Jvd11bY29sXSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXN0YXJ0Qm9hcmQoKSB7XG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDM7IHJvdysrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCAzOyBjb2wrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbcm93XVtjb2xdID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBwbGF5ZXJJY29ucyxcbiAgICAgICAgc3dpdGNoSWNvbnMsXG4gICAgICAgIGFkZE1hcmssXG4gICAgICAgIGJvYXJkLFxuICAgICAgICBjaGVja1dpbm5lcixcbiAgICAgICAgY2hlY2tEcmF3LFxuICAgICAgICByZXN0YXJ0Qm9hcmQsXG4gICAgfTtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGdhbWVCb2FyZDtcbiIsImltcG9ydCBnYW1lQm9hcmQgZnJvbSAnLi9nYW1lLmpzJztcblxuY29uc3QgVUkgPSAoZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IG15R2FtZUJvYXJkID0gZ2FtZUJvYXJkO1xuICAgIGNvbnN0IHNxdWFyZXMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmljb24tdGV4dCcpXTtcbiAgICBjb25zdCBwbGF5ZXJJY29uQnRuID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pY29uJyldO1xuICAgIGNvbnN0IGdhbWVUeXBlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbWUtdHlwZScpO1xuICAgIGNvbnN0IHBsYXllcnMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBsYXllcicpXTtcbiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm92ZXJsYXknKTtcbiAgICBsZXQgY2xpY2tlZCA9IGZhbHNlO1xuICAgIC8vIFBMQUNFUyBDVVJSRU5UIFBMQVlFUlMgTUFSSyBXSVRIIEFQUFJPUFJJQVRFIENPTE9SXG4gICAgZnVuY3Rpb24gcGxhY2VJY29uKCkge1xuICAgICAgICAvLyBESVNBQkxFUyBDTElDS0lORyBPTiBTUVVBUkVTIFdISUxFIElUUyBJTiBQUk9HUkVTU1xuICAgICAgICBpZiAoY2xpY2tlZCkgcmV0dXJuO1xuICAgICAgICBjbGlja2VkID0gdHJ1ZTtcblxuICAgICAgICBjb25zdCBhY3RpdmVQbGF5ZXJEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlJyk7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVBsYXllckljb24gPVxuICAgICAgICAgICAgYWN0aXZlUGxheWVyRGl2LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpLnRleHRDb250ZW50O1xuICAgICAgICBjb25zdCBhY3RpdmVQbGF5ZXJOYW1lID1cbiAgICAgICAgICAgIGFjdGl2ZVBsYXllckRpdi5xdWVyeVNlbGVjdG9yKCdzcGFuJykudGV4dENvbnRlbnQ7XG5cbiAgICAgICAgY29uc3QgY3VyUm93ID0gTnVtYmVyKHRoaXMuY2xhc3NOYW1lLnNwbGl0KCcgJylbMF0uc3BsaXQoJy0nKVsxXSk7XG4gICAgICAgIGNvbnN0IGN1ckNvbHVtbiA9IE51bWJlcih0aGlzLmNsYXNzTmFtZS5zcGxpdCgnICcpWzBdLnNwbGl0KCctJylbMl0pO1xuICAgICAgICBjb25zdCBnYW1lVHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lLXR5cGUnKS50ZXh0Q29udGVudDtcbiAgICAgICAgY29uc3Qgd2lubmVyVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53aW5uZXItdGV4dCcpO1xuXG4gICAgICAgIC8vIElGIElUUyBFTVBUWSBTUVVBUkVcbiAgICAgICAgaWYgKHRoaXMudGV4dENvbnRlbnQgPT09ICcnKSB7XG4gICAgICAgICAgICByZW5kZXJJY29uKHRoaXMsIGFjdGl2ZVBsYXllckljb24pO1xuXG4gICAgICAgICAgICAvLyBVUERBVEVTIEJPQVJEIEFSUkFZXG4gICAgICAgICAgICBteUdhbWVCb2FyZC5hZGRNYXJrKGN1clJvdywgY3VyQ29sdW1uLCBhY3RpdmVQbGF5ZXJJY29uKTtcbiAgICAgICAgICAgIC8vIERJU1BMQVlTIFRIRSBXSU5ORVIgVEVYVCBJRiBUSEUgR0FNRSBJUyBGSU5JU0hFRFxuICAgICAgICAgICAgaWYgKG15R2FtZUJvYXJkLmNoZWNrV2lubmVyKCkpIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5V2lubmVyVGV4dChhY3RpdmVQbGF5ZXJOYW1lKTtcbiAgICAgICAgICAgICAgICAvLyBESVNQTEFZUyBUSEUgVElFIE1FU1NBR0UgSUYgSVRTIFRJRVxuICAgICAgICAgICAgfSBlbHNlIGlmIChteUdhbWVCb2FyZC5jaGVja0RyYXcoKSkge1xuICAgICAgICAgICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgd2lubmVyVGV4dC50ZXh0Q29udGVudCA9ICdUaGUgZ2FtZSBpcyB0aWUhJztcbiAgICAgICAgICAgICAgICAvLyBBSSdTIFRVUk5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZ2FtZVR5cGUuaW5jbHVkZXMoJ0FJJykpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2hQbGF5ZXIoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlSWNvbkFJKCk7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaFBsYXllcigpO1xuICAgICAgICAgICAgY2xpY2tlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGxhY2VJY29uQUkoKSB7XG4gICAgICAgIGNvbnN0IGRpdkFJID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpO1xuICAgICAgICBjb25zdCBpY29uQUkgPSBkaXZBSS5xdWVyeVNlbGVjdG9yKCdidXR0b24nKS50ZXh0Q29udGVudDtcbiAgICAgICAgbGV0IHNxdWFyZSwgcm93LCBjb2w7XG5cbiAgICAgICAgLy8gUFVUUyBNQVJLIE9OIFJBTkRPTSBQTEFDRVxuICAgICAgICBkbyB7XG4gICAgICAgICAgICByb3cgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzKTtcbiAgICAgICAgICAgIGNvbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpO1xuICAgICAgICAgICAgc3F1YXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnNwYW4tJHtyb3d9LSR7Y29sfWApO1xuICAgICAgICB9IHdoaWxlIChzcXVhcmUudGV4dENvbnRlbnQgIT09ICcnKTtcblxuICAgICAgICByZW5kZXJJY29uKHNxdWFyZSwgaWNvbkFJKTtcbiAgICAgICAgbXlHYW1lQm9hcmQuYWRkTWFyayhyb3csIGNvbCwgaWNvbkFJKTtcblxuICAgICAgICAvLyBDSEVDS1MgSUYgQUkgV09OXG4gICAgICAgIGlmIChteUdhbWVCb2FyZC5jaGVja1dpbm5lcigpKSB7XG4gICAgICAgICAgICBkaXNwbGF5V2lubmVyVGV4dCgnQUknKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN3aXRjaFBsYXllcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVuZGVySWNvbihlbGVtZW50LCBpY29uKSB7XG4gICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBpY29uO1xuICAgICAgICBlbGVtZW50LnN0eWxlLmNvbG9yID0gaWNvbiA9PT0gJ1gnID8gJyNGRkYnIDogJyNDMzA3M0YnO1xuICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgxLjQpJztcbiAgICAgICAgLy8gU0NBTEUgQU5JTUFUSU9OXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMSknO1xuICAgICAgICB9LCA1MDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN3aXRjaFBsYXllcigpIHtcbiAgICAgICAgcGxheWVycy5mb3JFYWNoKChwbGF5ZXIpID0+IHBsYXllci5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlzcGxheVdpbm5lclRleHQobmFtZSkge1xuICAgICAgICBjb25zdCB3aW5uZXJUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndpbm5lci10ZXh0Jyk7XG4gICAgICAgIGNvbnN0IHdpbm5lckljb24gPSBteUdhbWVCb2FyZC5jaGVja1dpbm5lcigpO1xuXG4gICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIHdpbm5lclRleHQudGV4dENvbnRlbnQgPSBgVGhlIHdpbm5lciBpcyAke25hbWV9ICgke3dpbm5lckljb259KWA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlV2lubmVyVGV4dCgpIHtcbiAgICAgICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgcmVzdGFydEdhbWUoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXN0YXJ0R2FtZSgpIHtcbiAgICAgICAgc3F1YXJlcy5mb3JFYWNoKChzcXVhcmUpID0+IChzcXVhcmUudGV4dENvbnRlbnQgPSAnJykpO1xuICAgICAgICBjb25zdCBwbGF5ZXIxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllci0xJyk7XG4gICAgICAgIGNvbnN0IHBsYXllcjIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyLTInKTtcbiAgICAgICAgcGxheWVyMS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgcGxheWVyMi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgbXlHYW1lQm9hcmQucmVzdGFydEJvYXJkKCk7XG4gICAgfVxuXG4gICAgLy8gU1dJVENIRVMgR0FNRSBUWVBFXG4gICAgZnVuY3Rpb24gc2VsZWN0R2FtZVR5cGUoKSB7XG4gICAgICAgIGNvbnN0IHBsYXllcjJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllci0yLW5hbWUnKTtcbiAgICAgICAgaWYgKGdhbWVUeXBlQnRuLnRleHRDb250ZW50ID09PSAnUGxheWVyIHZzIFBsYXllcicpIHtcbiAgICAgICAgICAgIGdhbWVUeXBlQnRuLnRleHRDb250ZW50ID0gJ1BsYXllciB2cyBBSSc7XG4gICAgICAgICAgICBwbGF5ZXIyTmFtZS50ZXh0Q29udGVudCA9ICdBSSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnYW1lVHlwZUJ0bi50ZXh0Q29udGVudCA9ICdQbGF5ZXIgdnMgUGxheWVyJztcbiAgICAgICAgICAgIHBsYXllcjJOYW1lLnRleHRDb250ZW50ID0gJ1BsYXllciAyJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3RhcnRHYW1lKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNlbGVjdEljb24oKSB7XG4gICAgICAgIG15R2FtZUJvYXJkLnN3aXRjaEljb25zKCk7XG4gICAgICAgIGNvbnN0IHBsYXllckljb24xID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllci0xLWljb24nKTtcbiAgICAgICAgY29uc3QgcGxheWVySWNvbjIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyLTItaWNvbicpO1xuXG4gICAgICAgIHBsYXllckljb24xLnRleHRDb250ZW50ID0gbXlHYW1lQm9hcmQucGxheWVySWNvbnNbMF07XG4gICAgICAgIHBsYXllckljb24yLnRleHRDb250ZW50ID0gbXlHYW1lQm9hcmQucGxheWVySWNvbnNbMV07XG5cbiAgICAgICAgcmVzdGFydEdhbWUoKTtcbiAgICB9XG5cbiAgICAvLyBFVkVOVCBMSVNURU5FUlNcbiAgICBvdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVtb3ZlV2lubmVyVGV4dCk7XG4gICAgcGxheWVySWNvbkJ0bi5mb3JFYWNoKChpY29uKSA9PiBpY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VsZWN0SWNvbikpO1xuICAgIGdhbWVUeXBlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VsZWN0R2FtZVR5cGUpO1xuICAgIHNxdWFyZXMuZm9yRWFjaCgoc3F1YXJlKSA9PiBzcXVhcmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwbGFjZUljb24pKTtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IFVJO1xuIl0sIm5hbWVzIjpbInBsYXllckljb25zIiwic3dpdGNoSWNvbnMiLCJ0aGlzIiwiYWRkTWFyayIsInJvdyIsImNvbHVtbiIsIm1hcmsiLCJib2FyZCIsImNoZWNrV2lubmVyIiwid2lubmVyIiwiY29sIiwiY2hlY2tEcmF3IiwicmVzdGFydEJvYXJkIiwibXlHYW1lQm9hcmQiLCJnYW1lIiwic3F1YXJlcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInBsYXllckljb25CdG4iLCJnYW1lVHlwZUJ0biIsInF1ZXJ5U2VsZWN0b3IiLCJwbGF5ZXJzIiwib3ZlcmxheSIsImNsaWNrZWQiLCJwbGFjZUljb24iLCJhY3RpdmVQbGF5ZXJEaXYiLCJhY3RpdmVQbGF5ZXJJY29uIiwidGV4dENvbnRlbnQiLCJhY3RpdmVQbGF5ZXJOYW1lIiwiY3VyUm93IiwiTnVtYmVyIiwiY2xhc3NOYW1lIiwic3BsaXQiLCJjdXJDb2x1bW4iLCJnYW1lVHlwZSIsIndpbm5lclRleHQiLCJyZW5kZXJJY29uIiwiZGlzcGxheVdpbm5lclRleHQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJpbmNsdWRlcyIsInN3aXRjaFBsYXllciIsInNldFRpbWVvdXQiLCJpY29uQUkiLCJzcXVhcmUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwbGFjZUljb25BSSIsImVsZW1lbnQiLCJpY29uIiwic3R5bGUiLCJjb2xvciIsInRyYW5zZm9ybSIsImZvckVhY2giLCJwbGF5ZXIiLCJ0b2dnbGUiLCJuYW1lIiwid2lubmVySWNvbiIsInJlc3RhcnRHYW1lIiwicGxheWVyMSIsInBsYXllcjIiLCJhZGQiLCJzZWxlY3RJY29uIiwicGxheWVySWNvbjEiLCJwbGF5ZXJJY29uMiIsImFkZEV2ZW50TGlzdGVuZXIiLCJwbGF5ZXIyTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=