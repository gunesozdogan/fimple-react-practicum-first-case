(()=>{"use strict";const t={playerIcons:["X","O"],switchIcons:function(){this.playerIcons="X"===this.playerIcons[0]?["O","X"]:["X","O"]},addMark:function(t,e,o){this.board[t][e]=o},board:[["","",""],["","",""],["","",""]],checkWinner:function(){let t;for(let e=0;e<3;e++)if(this.board[e][0]===this.board[e][1]&&this.board[e][0]===this.board[e][2]&&""!==this.board[e][0])return t=this.board[e][0],t;for(let e=0;e<3;e++)if(this.board[0][e]===this.board[1][e]&&this.board[0][e]===this.board[2][e]&&""!==this.board[0][e])return t=this.board[0][e],t;if(this.board[0][0]===this.board[1][1]&&this.board[0][0]===this.board[2][2]){if(""!==this.board[0][0])return t=this.board[0][0],t}else if(this.board[2][0]===this.board[1][1]&&this.board[2][0]===this.board[0][2]&&""!==this.board[2][0])return t=this.board[2][0],t},checkDraw:function(){for(let t=0;t<3;t++)for(let e=0;e<3;e++)if(""===this.board[t][e])return!1;return!0},restartBoard:function(){for(let t=0;t<3;t++)for(let e=0;e<3;e++)this.board[t][e]=""}};!function(){const e=t,o=[...document.querySelectorAll(".icon-text")],n=[...document.querySelectorAll(".icon")],r=document.querySelector(".game-type"),c=[...document.querySelectorAll(".player")],i=document.querySelector(".overlay");function s(){const t=document.querySelector(".active"),o=t.querySelector("button").textContent,n=t.querySelector("span").textContent,r=Number(this.className.split(" ")[0].split("-")[1]),c=Number(this.className.split(" ")[0].split("-")[2]),s=document.querySelector(".game-type").textContent,d=document.querySelector(".winner-text");""===this.textContent&&(this.textContent=o,this.style.color="X"===this.textContent?"#fff":"#C3073F",e.addMark(r,c,o),e.checkWinner()?l(n):e.checkDraw()?(i.classList.remove("hidden"),d.textContent="The game is tie!"):s.includes("AI")&&(a(),function(){const t=document.querySelector(".active").querySelector("button").textContent;let o,n,r;do{n=Math.floor(3*Math.random()),r=Math.floor(3*Math.random()),o=document.querySelector(`.span-${n}-${r}`)}while(""!==o.textContent);o.textContent=t,o.style.color="X"===t?"#fff":"#C3073F",e.addMark(n,r,t),e.checkWinner()&&l("AI")}()),a())}function a(){c.forEach((t=>t.classList.toggle("active")))}function l(t){const o=document.querySelector(".winner-text"),n=e.checkWinner();i.classList.remove("hidden"),o.textContent=`The winner is ${t} (${n})`}function d(){o.forEach((t=>t.textContent=""));const t=document.querySelector(".player-1"),n=document.querySelector(".player-2");t.classList.add("active"),n.classList.remove("active"),e.restartBoard()}function u(){e.switchIcons();const t=document.querySelector(".player-1-icon"),o=document.querySelector(".player-2-icon");t.textContent=e.playerIcons[0],o.textContent=e.playerIcons[1],d()}i.addEventListener("click",(function(){i.classList.add("hidden"),d()})),n.forEach((t=>t.addEventListener("click",u))),r.addEventListener("click",(function(){const t=document.querySelector(".player-2-name");"Player vs Player"===r.textContent?(r.textContent="Player vs AI",t.textContent="AI"):(r.textContent="Player vs Player",t.textContent="Player 2"),d()})),o.forEach((t=>t.addEventListener("click",s)))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxTQUFTSSxjQUFjLGFBQ3ZDa0MsRUFBUWhCLFVBQVVrQixJQUFJLFVBQ3RCRCxFQUFRakIsVUFBVUMsT0FBTyxVQUN6QjFCLEVBQVlELGNBQ2hCLENBZUEsU0FBUzZDLElBQ0w1QyxFQUFZWixjQUNaLE1BQU15RCxFQUFjMUMsU0FBU0ksY0FBYyxrQkFDckN1QyxFQUFjM0MsU0FBU0ksY0FBYyxrQkFFM0NzQyxFQUFZaEMsWUFBY2IsRUFBWWIsWUFBWSxHQUNsRDJELEVBQVlqQyxZQUFjYixFQUFZYixZQUFZLEdBRWxEcUQsR0FDSixDQUdBL0IsRUFBUXNDLGlCQUFpQixTQXZDekIsV0FDSXRDLEVBQVFnQixVQUFVa0IsSUFBSSxVQUN0QkgsR0FDSixJQXFDQW5DLEVBQWM4QixTQUFTYSxHQUFTQSxFQUFLRCxpQkFBaUIsUUFBU0gsS0FDL0R0QyxFQUFZeUMsaUJBQWlCLFNBMUI3QixXQUNJLE1BQU1FLEVBQWM5QyxTQUFTSSxjQUFjLGtCQUNYLHFCQUE1QkQsRUFBWU8sYUFDWlAsRUFBWU8sWUFBYyxlQUMxQm9DLEVBQVlwQyxZQUFjLE9BRTFCUCxFQUFZTyxZQUFjLG1CQUMxQm9DLEVBQVlwQyxZQUFjLFlBRzlCMkIsR0FDSixJQWdCQXRDLEVBQVFpQyxTQUFTTCxHQUFXQSxFQUFPaUIsaUJBQWlCLFFBQVNyQyxJQUNoRSxDQXhIVSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmltcGxlLXJlYWN0LXByYWN0aWN1bS1maXJzdC1jYXNlLy4vc3JjL21vZHVsZXMvZ2FtZS5qcyIsIndlYnBhY2s6Ly9maW1wbGUtcmVhY3QtcHJhY3RpY3VtLWZpcnN0LWNhc2UvLi9zcmMvbW9kdWxlcy9VSS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBnYW1lQm9hcmQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGxldCBwbGF5ZXJJY29ucyA9IFsnWCcsICdPJ107XG4gICAgY29uc3QgYm9hcmQgPSBbXG4gICAgICAgIFsnJywgJycsICcnXSxcbiAgICAgICAgWycnLCAnJywgJyddLFxuICAgICAgICBbJycsICcnLCAnJ10sXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIHN3aXRjaEljb25zKCkge1xuICAgICAgICB0aGlzLnBsYXllckljb25zID1cbiAgICAgICAgICAgIHRoaXMucGxheWVySWNvbnNbMF0gPT09ICdYJyA/IFsnTycsICdYJ10gOiBbJ1gnLCAnTyddO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZE1hcmsocm93LCBjb2x1bW4sIG1hcmspIHtcbiAgICAgICAgdGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0gPSBtYXJrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoZWNrV2lubmVyKCkge1xuICAgICAgICBsZXQgd2lubmVyO1xuICAgICAgICAvLyBDSEVDS1MgRUFDSCBST1dcbiAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgMzsgcm93KyspIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW3Jvd11bMF0gPT09IHRoaXMuYm9hcmRbcm93XVsxXSAmJlxuICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbcm93XVswXSA9PT0gdGhpcy5ib2FyZFtyb3ddWzJdXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ib2FyZFtyb3ddWzBdICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICB3aW5uZXIgPSB0aGlzLmJvYXJkW3Jvd11bMF07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aW5uZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIENIRUNLUyBFQUNIIENPTFVNTlxuICAgICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCAzOyBjb2wrKykge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbMF1bY29sXSA9PT0gdGhpcy5ib2FyZFsxXVtjb2xdICYmXG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZFswXVtjb2xdID09PSB0aGlzLmJvYXJkWzJdW2NvbF1cbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvYXJkWzBdW2NvbF0gIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbm5lciA9IHRoaXMuYm9hcmRbMF1bY29sXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbm5lcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ0hFQ0tTIERJQUdPTkFMXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuYm9hcmRbMF1bMF0gPT09IHRoaXMuYm9hcmRbMV1bMV0gJiZcbiAgICAgICAgICAgIHRoaXMuYm9hcmRbMF1bMF0gPT09IHRoaXMuYm9hcmRbMl1bMl1cbiAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ib2FyZFswXVswXSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICB3aW5uZXIgPSB0aGlzLmJvYXJkWzBdWzBdO1xuICAgICAgICAgICAgICAgIHJldHVybiB3aW5uZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmJvYXJkWzJdWzBdID09PSB0aGlzLmJvYXJkWzFdWzFdICYmXG4gICAgICAgICAgICB0aGlzLmJvYXJkWzJdWzBdID09PSB0aGlzLmJvYXJkWzBdWzJdXG4gICAgICAgICkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYm9hcmRbMl1bMF0gIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgd2lubmVyID0gdGhpcy5ib2FyZFsyXVswXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd2lubmVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2hlY2tEcmF3KCkge1xuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCAzOyByb3crKykge1xuICAgICAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgMzsgY29sKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ib2FyZFtyb3ddW2NvbF0gPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzdGFydEJvYXJkKCkge1xuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCAzOyByb3crKykge1xuICAgICAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgMzsgY29sKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW3Jvd11bY29sXSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcGxheWVySWNvbnMsXG4gICAgICAgIHN3aXRjaEljb25zLFxuICAgICAgICBhZGRNYXJrLFxuICAgICAgICBib2FyZCxcbiAgICAgICAgY2hlY2tXaW5uZXIsXG4gICAgICAgIGNoZWNrRHJhdyxcbiAgICAgICAgcmVzdGFydEJvYXJkLFxuICAgIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBnYW1lQm9hcmQ7XG4iLCJpbXBvcnQgZ2FtZUJvYXJkIGZyb20gJy4vZ2FtZS5qcyc7XG5cbmNvbnN0IFVJID0gKGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBteUdhbWVCb2FyZCA9IGdhbWVCb2FyZDtcbiAgICBjb25zdCBzcXVhcmVzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pY29uLXRleHQnKV07XG4gICAgY29uc3QgcGxheWVySWNvbkJ0biA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaWNvbicpXTtcbiAgICBjb25zdCBnYW1lVHlwZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lLXR5cGUnKTtcbiAgICBjb25zdCBwbGF5ZXJzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wbGF5ZXInKV07XG4gICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5Jyk7XG5cbiAgICAvLyBQTEFDRVMgQ1VSUkVOVCBQTEFZRVJTIE1BUksgV0lUSCBBUFBST1BSSUFURSBDT0xPUlxuICAgIGZ1bmN0aW9uIHBsYWNlSWNvbigpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlUGxheWVyRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpO1xuICAgICAgICBjb25zdCBhY3RpdmVQbGF5ZXJJY29uID1cbiAgICAgICAgICAgIGFjdGl2ZVBsYXllckRpdi5xdWVyeVNlbGVjdG9yKCdidXR0b24nKS50ZXh0Q29udGVudDtcbiAgICAgICAgY29uc3QgYWN0aXZlUGxheWVyTmFtZSA9XG4gICAgICAgICAgICBhY3RpdmVQbGF5ZXJEaXYucXVlcnlTZWxlY3Rvcignc3BhbicpLnRleHRDb250ZW50O1xuXG4gICAgICAgIGNvbnN0IGN1clJvdyA9IE51bWJlcih0aGlzLmNsYXNzTmFtZS5zcGxpdCgnICcpWzBdLnNwbGl0KCctJylbMV0pO1xuICAgICAgICBjb25zdCBjdXJDb2x1bW4gPSBOdW1iZXIodGhpcy5jbGFzc05hbWUuc3BsaXQoJyAnKVswXS5zcGxpdCgnLScpWzJdKTtcbiAgICAgICAgY29uc3QgZ2FtZVR5cGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZS10eXBlJykudGV4dENvbnRlbnQ7XG4gICAgICAgIGNvbnN0IHdpbm5lclRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2lubmVyLXRleHQnKTtcblxuICAgICAgICAvLyBJRiBJVFMgRU1QVFkgU1FVQVJFXG4gICAgICAgIGlmICh0aGlzLnRleHRDb250ZW50ID09PSAnJykge1xuICAgICAgICAgICAgdGhpcy50ZXh0Q29udGVudCA9IGFjdGl2ZVBsYXllckljb247XG4gICAgICAgICAgICB0aGlzLnN0eWxlLmNvbG9yID0gdGhpcy50ZXh0Q29udGVudCA9PT0gJ1gnID8gJyNmZmYnIDogJyNDMzA3M0YnO1xuICAgICAgICAgICAgLy8gVVBEQVRFUyBCT0FSRCBBUlJBWVxuICAgICAgICAgICAgbXlHYW1lQm9hcmQuYWRkTWFyayhjdXJSb3csIGN1ckNvbHVtbiwgYWN0aXZlUGxheWVySWNvbik7XG4gICAgICAgICAgICAvLyBESVNQTEFZUyBUSEUgV0lOTkVSIFRFWFQgSUYgVEhFIEdBTUUgSVMgRklOSVNIRURcbiAgICAgICAgICAgIGlmIChteUdhbWVCb2FyZC5jaGVja1dpbm5lcigpKSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheVdpbm5lclRleHQoYWN0aXZlUGxheWVyTmFtZSk7XG4gICAgICAgICAgICAgICAgLy8gRElTUExBWVMgVEhFIFRJRSBNRVNTQUdFIElGIElUUyBUSUVcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobXlHYW1lQm9hcmQuY2hlY2tEcmF3KCkpIHtcbiAgICAgICAgICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgIHdpbm5lclRleHQudGV4dENvbnRlbnQgPSAnVGhlIGdhbWUgaXMgdGllISc7XG4gICAgICAgICAgICAgICAgLy8gQUknUyBUVVJOXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGdhbWVUeXBlLmluY2x1ZGVzKCdBSScpKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoUGxheWVyKCk7XG4gICAgICAgICAgICAgICAgcGxhY2VJY29uQUkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaFBsYXllcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGxhY2VJY29uQUkoKSB7XG4gICAgICAgIGNvbnN0IGRpdkFJID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpO1xuICAgICAgICBjb25zdCBpY29uQUkgPSBkaXZBSS5xdWVyeVNlbGVjdG9yKCdidXR0b24nKS50ZXh0Q29udGVudDtcbiAgICAgICAgbGV0IHNxdWFyZSwgcm93LCBjb2w7XG5cbiAgICAgICAgLy8gUFVUUyBNQVJLIE9OIFJBTkRPTSBQTEFDRVxuICAgICAgICBkbyB7XG4gICAgICAgICAgICByb3cgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzKTtcbiAgICAgICAgICAgIGNvbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpO1xuICAgICAgICAgICAgc3F1YXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnNwYW4tJHtyb3d9LSR7Y29sfWApO1xuICAgICAgICB9IHdoaWxlIChzcXVhcmUudGV4dENvbnRlbnQgIT09ICcnKTtcblxuICAgICAgICBzcXVhcmUudGV4dENvbnRlbnQgPSBpY29uQUk7XG4gICAgICAgIHNxdWFyZS5zdHlsZS5jb2xvciA9IGljb25BSSA9PT0gJ1gnID8gJyNmZmYnIDogJyNDMzA3M0YnO1xuICAgICAgICBteUdhbWVCb2FyZC5hZGRNYXJrKHJvdywgY29sLCBpY29uQUkpO1xuXG4gICAgICAgIC8vIENIRUNLUyBJRiBBSSBXT05cbiAgICAgICAgaWYgKG15R2FtZUJvYXJkLmNoZWNrV2lubmVyKCkpIHtcbiAgICAgICAgICAgIGRpc3BsYXlXaW5uZXJUZXh0KCdBSScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3dpdGNoUGxheWVyKCkge1xuICAgICAgICBwbGF5ZXJzLmZvckVhY2goKHBsYXllcikgPT4gcGxheWVyLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXNwbGF5V2lubmVyVGV4dChuYW1lKSB7XG4gICAgICAgIGNvbnN0IHdpbm5lclRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2lubmVyLXRleHQnKTtcbiAgICAgICAgY29uc3Qgd2lubmVySWNvbiA9IG15R2FtZUJvYXJkLmNoZWNrV2lubmVyKCk7XG5cbiAgICAgICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgd2lubmVyVGV4dC50ZXh0Q29udGVudCA9IGBUaGUgd2lubmVyIGlzICR7bmFtZX0gKCR7d2lubmVySWNvbn0pYDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVXaW5uZXJUZXh0KCkge1xuICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICByZXN0YXJ0R2FtZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc3RhcnRHYW1lKCkge1xuICAgICAgICBzcXVhcmVzLmZvckVhY2goKHNxdWFyZSkgPT4gKHNxdWFyZS50ZXh0Q29udGVudCA9ICcnKSk7XG4gICAgICAgIGNvbnN0IHBsYXllcjEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyLTEnKTtcbiAgICAgICAgY29uc3QgcGxheWVyMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXItMicpO1xuICAgICAgICBwbGF5ZXIxLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICBwbGF5ZXIyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICBteUdhbWVCb2FyZC5yZXN0YXJ0Qm9hcmQoKTtcbiAgICB9XG5cbiAgICAvLyBTV0lUQ0hFUyBHQU1FIFRZUEVcbiAgICBmdW5jdGlvbiBzZWxlY3RHYW1lVHlwZSgpIHtcbiAgICAgICAgY29uc3QgcGxheWVyMk5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyLTItbmFtZScpO1xuICAgICAgICBpZiAoZ2FtZVR5cGVCdG4udGV4dENvbnRlbnQgPT09ICdQbGF5ZXIgdnMgUGxheWVyJykge1xuICAgICAgICAgICAgZ2FtZVR5cGVCdG4udGV4dENvbnRlbnQgPSAnUGxheWVyIHZzIEFJJztcbiAgICAgICAgICAgIHBsYXllcjJOYW1lLnRleHRDb250ZW50ID0gJ0FJJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdhbWVUeXBlQnRuLnRleHRDb250ZW50ID0gJ1BsYXllciB2cyBQbGF5ZXInO1xuICAgICAgICAgICAgcGxheWVyMk5hbWUudGV4dENvbnRlbnQgPSAnUGxheWVyIDInO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzdGFydEdhbWUoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2VsZWN0SWNvbigpIHtcbiAgICAgICAgbXlHYW1lQm9hcmQuc3dpdGNoSWNvbnMoKTtcbiAgICAgICAgY29uc3QgcGxheWVySWNvbjEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyLTEtaWNvbicpO1xuICAgICAgICBjb25zdCBwbGF5ZXJJY29uMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXItMi1pY29uJyk7XG5cbiAgICAgICAgcGxheWVySWNvbjEudGV4dENvbnRlbnQgPSBteUdhbWVCb2FyZC5wbGF5ZXJJY29uc1swXTtcbiAgICAgICAgcGxheWVySWNvbjIudGV4dENvbnRlbnQgPSBteUdhbWVCb2FyZC5wbGF5ZXJJY29uc1sxXTtcblxuICAgICAgICByZXN0YXJ0R2FtZSgpO1xuICAgIH1cblxuICAgIC8vIEVWRU5UIExJU1RFTkVSU1xuICAgIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW1vdmVXaW5uZXJUZXh0KTtcbiAgICBwbGF5ZXJJY29uQnRuLmZvckVhY2goKGljb24pID0+IGljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxlY3RJY29uKSk7XG4gICAgZ2FtZVR5cGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxlY3RHYW1lVHlwZSk7XG4gICAgc3F1YXJlcy5mb3JFYWNoKChzcXVhcmUpID0+IHNxdWFyZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHBsYWNlSWNvbikpO1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgVUk7XG4iXSwibmFtZXMiOlsicGxheWVySWNvbnMiLCJzd2l0Y2hJY29ucyIsInRoaXMiLCJhZGRNYXJrIiwicm93IiwiY29sdW1uIiwibWFyayIsImJvYXJkIiwiY2hlY2tXaW5uZXIiLCJ3aW5uZXIiLCJjb2wiLCJjaGVja0RyYXciLCJyZXN0YXJ0Qm9hcmQiLCJteUdhbWVCb2FyZCIsImdhbWUiLCJzcXVhcmVzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicGxheWVySWNvbkJ0biIsImdhbWVUeXBlQnRuIiwicXVlcnlTZWxlY3RvciIsInBsYXllcnMiLCJvdmVybGF5IiwicGxhY2VJY29uIiwiYWN0aXZlUGxheWVyRGl2IiwiYWN0aXZlUGxheWVySWNvbiIsInRleHRDb250ZW50IiwiYWN0aXZlUGxheWVyTmFtZSIsImN1clJvdyIsIk51bWJlciIsImNsYXNzTmFtZSIsInNwbGl0IiwiY3VyQ29sdW1uIiwiZ2FtZVR5cGUiLCJ3aW5uZXJUZXh0Iiwic3R5bGUiLCJjb2xvciIsImRpc3BsYXlXaW5uZXJUZXh0IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiaW5jbHVkZXMiLCJzd2l0Y2hQbGF5ZXIiLCJpY29uQUkiLCJzcXVhcmUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwbGFjZUljb25BSSIsImZvckVhY2giLCJwbGF5ZXIiLCJ0b2dnbGUiLCJuYW1lIiwid2lubmVySWNvbiIsInJlc3RhcnRHYW1lIiwicGxheWVyMSIsInBsYXllcjIiLCJhZGQiLCJzZWxlY3RJY29uIiwicGxheWVySWNvbjEiLCJwbGF5ZXJJY29uMiIsImFkZEV2ZW50TGlzdGVuZXIiLCJpY29uIiwicGxheWVyMk5hbWUiXSwic291cmNlUm9vdCI6IiJ9